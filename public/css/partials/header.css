nav{
  border-radius: 0 0 10px 10px;
  box-shadow: 0 10px 20px 0 rgba(0,0,0,.25);
  background-color: var(--background-color);
}

/* Navbar básico */
.navbar{ padding: 0; min-height: auto; }

/* Container do navbar */
nav .container{
  position: relative;
  padding: .2rem 1rem;
  align-items: center;
}

/* Logo */
.logo-header{ height: 50px; width: auto; }

.header-right{
  min-width: 120px;
  display: flex;
  align-items: center;
}

.navbar-brand strong{ color: var(--textcolor-blue); }

.navbar .nav-link{
  font-style: normal !important;
  font-family: "Montserrat", sans-serif;
  font-weight: 500;
}

/* =========================
   Itens animados (APENAS no menu logado)
   ========================= */
.nav-animated .nav-item .nav-link{
  display: flex; align-items: center;
  width: 45px; overflow: hidden; white-space: nowrap;
  transition: width .4s ease;
  position: relative;
  padding: 8px 10px;
  color: #333;
}

/* Ícones laranja */
.nav-animated .nav-item .nav-link i{
  font-size: 1.2rem;
  flex-shrink: 0;
  color: var(--orange-color);
}

/* Texto que aparece no hover */
.nav-animated .nav-item .nav-link span{
  margin-left: 8px;
  opacity: 0;
  transition: opacity .3s ease .1s;
  color: #333;
}

/* Expandir no hover */
.nav-animated .nav-item:hover .nav-link,
.nav-animated .nav-item .nav-link:hover{
  width: 160px;
}
.nav-animated .nav-item:hover .nav-link span,
.nav-animated .nav-item .nav-link:hover span{
  opacity: 1;
}

/* User dropdown pode expandir mais (apenas no menu animado/logado) */
.nav-animated .user-menu-item:hover .nav-link,
.nav-animated .user-menu-item .nav-link:hover{
  width: 250px;
}

/* Badge de notificações (corrigido id) */
#notification-badge{
  position: absolute;
  right: 6px;
  top: 2px;
}

/* Dropdown abre no hover (desktop) */
.nav-item.dropdown:hover .dropdown-menu{ display: block; }
.nav-item.dropdown .dropdown-menu{ display: none; margin-top: 0; }

/* Espaço do caret do usuário */
.user-menu-item .dropdown-toggle::after{ margin-left: 10px; }

/* Animação das opções do dropdown */
.dropdown-menu .dropdown-item{
  opacity: 0; transform: translateX(-10px);
  transition: all .3s ease;
}
.dropdown-menu.show .dropdown-item{ opacity: 1; transform: translateX(0); }
.dropdown-menu.show .dropdown-item:nth-child(1){ transition-delay: .05s; }
.dropdown-menu.show .dropdown-item:nth-child(2){ transition-delay: .1s; }
.dropdown-menu.show .dropdown-item:nth-child(3){ transition-delay: .15s; }
.dropdown-menu.show .dropdown-item:nth-child(4){ transition-delay: .2s; }

.dropdown-item{
  font-family: "Montserrat", sans-serif;
  font-weight: 500; color: #333;
}
.dropdown-menu .dropdown-menu-end{ color: #333; }

/* ===== Bootstrap toggler fixes ===== */

/* Garante ícone mesmo sem .navbar-light/.navbar-dark */
.navbar{
  --bs-navbar-toggler-icon: url("data:image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3E%3Cpath stroke='rgba(0,0,0,0.7)' stroke-width='2' stroke-linecap='round' stroke-miterlimit='10' d='M4 7h22M4 15h22M4 23h22'/%3E%3C/svg%3E");
}

/* Reset do toggler */
.navbar-toggler{
  border: none; background: transparent;
  padding: .25rem .5rem;
  display: inline-flex; align-items: center; justify-content: center;
}
.navbar-toggler-icon{
  background-image: var(--bs-navbar-toggler-icon) !important;
  width: 1.6rem; height: 1.6rem; background-size: 1.6rem 1.6rem;
}

/* ===== Mobile (<= LG) ===== */
@media (max-width: 991.98px){

  nav .container{ position: relative; }

  .navbar-toggler{
    position: absolute; top: 12px; right: 12px; z-index: 10600;
    border-radius: 8px; padding: .4rem .5rem; background: #fff;
    box-shadow: 0 4px 10px rgba(0,0,0,.12);
  }

  .header-right .navbar-collapse{
    position: fixed; top: 64px; right: 12px; left: auto;
    background: #fff; z-index: 10500;
    box-shadow: 0 .5rem 1rem rgba(0,0,0,.15);
    width: 260px; padding: .25rem 0; border-radius: 8px;
    max-height: calc(100vh - 84px); overflow-y: auto; pointer-events: auto;
  }

  .header-right .navbar-nav{ flex-direction: column; gap: 0; }

  /* Força textos visíveis no mobile */
  .header-right .navbar-nav .nav-link{
    padding: .6rem 1rem; width: 100% !important; overflow: visible; color: #333 !important;
  }
  .header-right .navbar-nav .nav-link i{ color: var(--orange-color) !important; }
  .header-right .navbar-nav .nav-link span{ opacity: 1 !important; color: #333 !important; margin-left: 8px; }

  .header-right .navbar-collapse .nav-link,
  .header-right .navbar-collapse .nav-link span,
  .header-right .navbar-collapse .dropdown-item,
  .header-right .navbar-collapse .dropdown-header{
    color: #333 !important;
  }

  .header-right .navbar-collapse,
  .header-right .navbar-collapse .notification-dropdown{
    background: #ffffff !important;
  }

  .header-right .navbar-collapse .notification-badge,
  .header-right .navbar-collapse .notification-badge *{
    color: #fff !important; background: var(--orange-color) !important;
  }

  /* Dropdowns dentro do painel fixo (exceto notificações) */
  .header-right .navbar-collapse .dropdown-menu:not(.notification-dropdown){
    position: static !important; float: none !important; box-shadow: none !important;
    background: #fff !important; border: 0 !important;
    display: block !important; width: 100% !important; padding: 0 !important; margin: 0 !important;
    opacity: 1 !important; transition: opacity .2s ease !important;
  }
  .header-right .navbar-collapse .dropdown-menu:not(.notification-dropdown) .dropdown-item{
    padding: .6rem 1rem !important; background: #fff !important; display: block !important;
  }
  .header-right .navbar-collapse .dropdown-menu:not(.notification-dropdown):not(.show){
    display: none !important; opacity: 0 !important;
  }

  /* Bloqueia cliques em eventos quando o menu mobile está aberto */
  body:has(.navbar-collapse.show) .fc-event,
  body:has(.navbar-collapse.show) .event-clickable,
  body:has(.navbar-collapse.show) .fc-daygrid-event,
  body:has(.navbar-collapse.show) .fc-timegrid-event,
  body:has(.navbar-collapse.show) .event-popup-overlay{
    pointer-events: none !important;
  }
}
